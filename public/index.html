<!DOCTYPE html>
<html>
<head>
  <title>Lingo Lemur</title>
  <link rel="stylesheet" src="//normalize-css.googlecode.com/svn/trunk/normalize.css" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/foundation/5.5.3/css/foundation.min.css">
  <link href="https://fonts.googleapis.com/css?family=Raleway" rel="stylesheet" type="text/css">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>
  <script>
    var createTable = function(obj, sentiment) {
      var maxLength = Math.max(Object.keys(obj.vNegTerms).length, Object.keys(obj.negTerms).length, Object.keys(obj.posTerms).length, Object.keys(obj.vPosTerms).length);
      returnText = '<tr><th colspan="2">' + 'Very Positve Terms' + '</th>'
      + '<th colspan="2">' + 'Positve Terms' + '</th>'
      + '<th colspan="2">' + 'Negative Terms' + '</th>'
      + '<th colspan="2">' + 'Very Negative Terms' + '</th>'
      + '<tr>';
      for (var i = 0; i < maxLength; i++) {
        returnText += "<tr><td> " + Object.keys(obj.vPosTerms)[i] + "</td>"
        + "<td>" + obj.vPosTerms[Object.keys(obj.vPosTerms)[i]] + '</td>'
        + "<td>" + Object.keys(obj.posTerms)[i] + "</td>"
        + "<td>" + obj.posTerms[Object.keys(obj.posTerms)[i]] + '</td>'
        + "<td>" + Object.keys(obj.negTerms)[i] + "</td>"
        + "<td>" + obj.negTerms[Object.keys(obj.negTerms)[i]] + '</td>'
        + '<td>' + Object.keys(obj.vNegTerms)[i] + "</td>"
        + "<td>" + obj.vNegTerms[Object.keys(obj.vNegTerms)[i]] + '</td>'
        + '</tr>';
      }
      returnText = returnText.replace(/undefined/g, " ");
      return returnText;
    };
    $(document).ready(function() {
      $(function(){
        var processText = '';
        var returnString = '';
        $("button[type='submit']").click(function(){
          $(".returnString").fadeIn(500);
          $(".returnString").empty();
          processText = $("#processText").val();
          $.post("/process", {text: processText}).done(function(data){
            $(".returnString").html(
              '<p>The sentiment of your text is ' + data.sentiment + '.<br>'
              + 'The words that are affecting the rating are and how many times they appear are:<br></p>'
              + '<table id="sentiment">'
              + createTable(data)
              + '</table>');
          });
        });
      });
    });
  </script>
  <!-- app.css holds customized style -->
  <style>
  body {
    font-family: 'Raleway', sans-serif;  }
  textarea {
    margin: 0px auto 40px;
    background: #f8f8f8; }
  .returnString {
    display: none }
  img.homepage-lemur {
    border-radius: 50%;
    border: 1px solid #333;
    margin: 10px; }
  </style>
</head>

<body>
<!-- top nav -->
  <nav class="top-bar" data-topbar role="navigation">
    <ul class="title-area">
      <li class="name">
        <h1><a href="#">Lingo Lemur</a></h1>
      </li>
      <li class="toggle-topbar menu-icon"><a href="#"><span>Menu</span></a></li>
    </ul>

    <section class="top-bar-section">
    <!-- Right Nav Section -->
      <ul class="right">
        <li class="active"><a href="#">Sign Up</a></li>
      </ul>
    </section>
  </nav>
<!-- end top nav -->

  <div class="row">
    <div class="medium-11 large-centered columns">
      <h1><small>Welcome to Lingo Lemur</small></h1>
        <p>Our natural language processor algorithm, the Lingo Lemur helps you extract hidden sentiments behind songs and articles. (Max number of words 5000)</p>
        <div class="word-count"></div>
        <textarea id="processText" rows="10" placeholder="Type or paste your text here..."></textarea>
        <button type="submit" class="button radius success">Process</button>
      <div class="medium-11 large-centered columns">
        <p class="returnString panel callout radius"></p>
      </div>
    </div>
  </div>

  <!-- scripts -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/foundation/5.5.3/js/foundation.min.js"></script>
</body>
</html>
